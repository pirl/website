!function(_){"use strict";_.notificationx=_.notificationx||{},_.notificationx.active_pressbar=0,_.notificationx.countdownInterval=null,_(document).ready(function(){_.notificationx.init()}),window.addEventListener("load",function(){_.notificationx.pressbar()}),_.notificationx.init=function(){_.notificationx.windowWidth=_(window).outerWidth(),_.notificationx.conversions(),_.notificationx.analytics(),_.notificationx.events()},_.notificationx.Ajaxlytics=function(n){if(n!={}&&null!=n&&"undefined"!=typeof NotificationX){if(null==n.nonce)return;jQuery.ajax({type:"POST",url:NotificationX.ajaxurl,data:{action:"notificationx_pro_analytics",nonce:n.nonce,id:n.id,clicked:n.clicked||!1,nonce_key:n.nonce_key||!1},success:function(n){}})}},_.notificationx.analytics=function(){var a={};_("body").on("nx_frontend_bar_show",function(n,i,t){var o=_(i).data("nonce"),e=1==_(i).data("analytics");a.nonce=o,a.id=t,a.nonce_key="_notificationx_bar_nonce",null!=o&&e&&(_.notificationx.Ajaxlytics(a),_(i).find("a.nx-bar-button").on("click",function(n){n.preventDefault(),a.clicked=!0,_.notificationx.Ajaxlytics(a),a.clicked=!1,n.currentTarget.attributes.hasOwnProperty("target")?window.open(_(this).attr("href")):window.location.href=_(this).attr("href")}))}),_("body").on("nx_before_render",function(n,i,t){if(i.id&&i.analytics){var o=_(t).find(".notificationx-analytics").val();a.nonce=o,a.id=i.id,a.nonce_key="_notificationx_pro_analytics_nonce",_.notificationx.Ajaxlytics(a)}}),_("body").on("nx_frontend_jquery",function(n,t,i){t.id&&t.analytics&&_(i).on("click",function(n){var i=_(this).find(".notificationx-analytics").val();a.nonce=i,a.id=t.id,a.nonce_key="_notificationx_pro_analytics_nonce",a.clicked=!0,_.notificationx.Ajaxlytics(a),a.clicked=!1})})},_.notificationx.countdown=function(n){if(n.end_date){var i=new Date,t=n.end_date.getTime(),o=0;if((o=parseInt((t-i)/1e3))<=0)if(_.notificationx.countdownInterval&&clearInterval(_.notificationx.countdownInterval),o=0,n.evergreen)_.notificationx.hideBar("nx-bar-"+n.id,!0);else{n.bar.querySelector(".nx-countdown").classList.add("nx-expired");var e=n.bar.querySelector(".nx-countdown-text");null!=e&&e.classList.add("nx-expired")}var a,r,c,s=0;a=((a=((o=((o=(o-(s=o%60))/60)-(c=o%60))/60)-(r=o%24))/24)<10?"0":"")+a,r=(r<10?"0":"")+r,c=(c<10?"0":"")+c,s=(s<10?"0":"")+s,n.days.innerHTML=a,n.hours.innerHTML=r,n.minutes.innerHTML=c,n.seconds.innerHTML=s}},_.notificationx.countdownWrapper=function(n){_.notificationx.countdownInterval=setInterval(function(){_.notificationx.countdown(n)},1e3),_.notificationx.countdown(n)},_.notificationx.pressbar=function(){var n=_(".nx-bar");0<n.length&&n.each(function(n,i){var t=i.dataset.press_id,o=i.dataset.hide_after,e=i.dataset.auto_hide,a=i.dataset.close_forever,r=!!i.dataset.start_date&&new Date(i.dataset.start_date),c=!!i.dataset.end_date&&new Date(i.dataset.end_date),s=i.querySelector(".nx-bar-inner").offsetHeight,f=1e3*i.dataset.initial_delay,d=i.dataset.position,l=i.dataset.body_push,x=Boolean(i.dataset.evergreen);if(i.classList.contains("nx-bar-shortcode"))return!1;if(Cookies.get("notificationx_nx-bar-"+t))return!1;if("pushed"==l||null==l){var u=setTimeout(function(){_(i).hasClass("nx-bar-out")||_("body").addClass("has-nx-bar").css("padding-"+d,s),clearTimeout(u)},f);if(parseInt(e))var p=setTimeout(function(){_("body").css("padding-"+d,0).removeClass("has-nx-bar"),clearTimeout(p)},1e3*parseInt(o))}var v={id:t,bar:i,end_date:c,evergreen:x,start_date:r,days:i.querySelector(".nx-days"),hours:i.querySelector(".nx-hours"),minutes:i.querySelector(".nx-minutes"),seconds:i.querySelector(".nx-seconds")};if(_.notificationx.showBar(i,t),x||_.notificationx.countdownWrapper(v),(""!==o||void 0!==o)&&parseInt(e))var y=setTimeout(function(){_.notificationx.hideBar("nx-bar-"+t,a),clearTimeout(y)},1e3*parseInt(o))})},_.notificationx.conversions=function(){"undefined"!=typeof notificationx&&(window.localStorage.removeItem("nx_notifications"),0<notificationx.notificatons.length&&notificationx.notificatons.map(function(n){_.notificationx.process(n)}),0<notificationx.global_notifications.length&&_.notificationx.process(notificationx.global_notifications))},_.notificationx.events=function(){var n=_(".nx-bar .nx-close");null!==n&&n.on("click",function(n){_.notificationx.active_pressbar=0,_.notificationx.hideBar(n.currentTarget.offsetParent.id)})},_.notificationx.showBar=function(i,t){if(Cookies.get("notificationx_nx-bar-"+t))return!1;var n=parseInt(i.dataset.initial_delay),o=_(i).children(".nx-bar-inner"),e=document.querySelector("#wpadminbar"),a=null!=e?e.offsetHeight:0;""!==n&&!isNaN(n)||(n=0);var r=setTimeout(function(){if(_(i).hasClass("nx-bar-out"))clearTimeout(r);else{var n=_("html");n.addClass("nx-bar-active"),_(i).hasClass("nx-position-top")&&(_(n).animate([{"padding-top":0},{"padding-top":o+"px"}],{duration:300}),n.css("padding-top",o+"px"),_(i).css("top",a+"px")),_(i).addClass("nx-bar-visible"),_("body").trigger("nx_frontend_bar_show",[i,t]),_.notificationx.active_pressbar=1,clearTimeout(r)}},1e3*n)},_.notificationx.hideBar=function(n){var i=_(".nx-bar#"+n),t=_("html"),o=i[0].dataset.close_forever,e=_("#"+n).data("position");if(o){var a=(new Date).getTime()+5184e6,r=new Date(a);Cookies.set("notificationx_"+n,!0,{expires:r,path:"/"})}t.removeClass("nx-bar-active"),t.css("padding-top",0),i.addClass("nx-bar-out").parents("body").css("padding-"+e,0).removeClass("has-nx-bar"),i.removeClass("nx-bar-visible"),_.notificationx.active_pressbar=0},_.notificationx.render=function(i,n){var t=document.createElement("div");t.classList.add("notificationx-conversions"),t.insertAdjacentHTML("beforeend",n);var o=null!=i.id?".notificationx-"+i.id:".nx-notification",e=0,a=t.querySelectorAll(o),r=i.delay_between,c=_.notificationx.last(i.id,!1);0<=c&&(e=c+1),0===i.loop&&1===a.length&&(e=0),_("body").trigger("nx_before_render",[i,n]),setTimeout(function(){_.notificationx.show(a[e],i,e),setTimeout(function(){_.notificationx.hide(a[e],i.id),e++;var n=setInterval(function(){_.notificationx.show(a[e],i,e),setTimeout(function(){_.notificationx.hide(a[e],i.id),e>=a.length-1?(e=0)==i.loop&&clearInterval(n):e++},i.display_for)},r+i.display_for)},i.display_for)},i.delay_before)},_.notificationx.process=function(n){var i=n,t=!1;"number"!=typeof i&&(i=i.toString(),t=!0),jQuery.post({url:notificationx.ajaxurl,method:"POST",credentials:"same-origin",data:{action:"nx_get_conversions",nonce:notificationx.nonce,ids:i,global:t},success:function(n){var i=JSON.parse(n);_.notificationx.render(i.config,i.content)}}).fail(function(n){console.error(n),console.error("AJAX error, Something went wrong! Please, Contact support team.")})},_.notificationx.show=function(n,o,i){if(void 0!==n&&0!==n.length){var e=Cookies.get("nx-close-for-session");if(null!=e){if((e=JSON.parse(e)).hasOwnProperty(o.id)&&1==e[o.id])return}else e={};var t=_(n).find("img");if(r=-1,null!=(t=t[0]))var a=t.src,r=t.src.indexOf(".gif");var c=_("body"),s=-1!=n.classList.value.indexOf("nx-mobile-notification"),f=s?"10px":"30px";c.append(n),0<r&&(t.src=a),480<_.notificationx.windowWidth&&s&&(f="20px"),786<_.notificationx.windowWidth&&(f="30px"),_(n).animate({bottom:f,opacity:1},500),c.trigger("nx_frontend_jquery",[o,n]),_.notificationx.save(o.id,i);var d=_(n).find(".notificationx-close");null!=d&&d.on("click",function(n){var i=_(this),t=_(i[0]).parents(".nx-notification");_.notificationx.hide(t,o.id),e[o.id]=!0,Cookies.set("nx-close-for-session",JSON.stringify(e))})}},_.notificationx.hide=function(n,i){if(void 0!==n){var t=Cookies.get("nx-close-for-session");null!=t&&null!=i&&t.hasOwnProperty(i)&&1==t[i]||(_(n).animate({bottom:"0px",opacity:0},500),setTimeout(function(){_.notificationx.remove(_(n))},300))}},_.notificationx.remove=function(n){n.remove()},_.notificationx.save=function(n,i){if(window.localStorage){var t=_.notificationx.last(n,!0);"object"==typeof t?t[n]=i:(t=new Object)[n]=i,window.localStorage.setItem("nx_notifications",JSON.stringify(t))}else console.log("Browser does not support localStorage!")},_.notificationx.last=function(n,i){var t=-1;if(window.localStorage){var o=window.localStorage.getItem("nx_notifications");if(null!==o&&void 0!==(o=JSON.parse(o))[n]){if(i)return o;t=o[n]}}else console.log("Browser does not support localStorage!");return t}}(jQuery);